/**
 * Generated stuff...
 */
import {Injectable, EventEmitter} from 'angular2/core'
import {Http, Headers, Request, RequestMethod, RequestOptions, Response} from 'angular2/http';

/**
 * Configuration stuff
 */
@Injectable()
export class ServiceConfig {
    public rootUrl: string = 'localhost:8080';
    public request: EventEmitter<Request> = new EventEmitter<Request>();
    public response: EventEmitter<Response> = new EventEmitter<Response>();
}

/**
 * Request and response types and enumerations
 */
<% types.forEach(function(type) { %>
    <%- include('type-' + type.type, {type: type}) %>
<% }); %>


/**
 * Services stuff
 */
<% services.forEach(function(service) { %>
    <%- include('service', {service: service, rootUrl: rootUrl, varPfx: varPfx}) %>
<% }); %>

function substitudeUrl(url: string, values: Object): string {
    Object.keys(values).map(key => {
        url = url.replace('{' + encodeURIComponent(key) + '}', encodeURIComponent(values[key]));
    });
    return url;
}

function encodeParams(values: Object): string {
    return Object.keys(values).map(key => {
      return encodeURIComponent(key) + '=' + encodeURIComponent(values[key]);
    }).join('&');
}

function getRequestOptions(requestMediaType: string, responseMediaType: string): RequestOptions {
    let headers: Headers = new Headers();
    headers.append('Accept', responseMediaType);
    headers.append('Content-Type', requestMediaType);
    let options: RequestOptions = new RequestOptions();
    options.headers = headers;
    return options;
}
